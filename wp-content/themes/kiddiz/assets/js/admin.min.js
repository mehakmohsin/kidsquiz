jQuery(document).ready(function(a){function e(){a(".widget_multi_input").each(function(){var t=a(this),e=t.find(".widget_multi_value_field").val();if(0<e.length){var i=e.split("|");t.find(".widget_multi_fields").empty();t.parents(".widget_multi_input");a.each(i,function(e,i){t.find(".widget_multi_fields").append('<div class="set"><input type="text" value="'+i+'" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>')})}})}function n(e){var i="";e.find(".widget_multi_fields .widget_multi_single_field").each(function(){i+=a(this).val()+"|"}),e.find(".widget_multi_value_field").val(i.slice(0,-1)).change()}function i(){a(".content-type").on("change",function(){var e=a(this),i=e.parent().parent(),t=i.find(".block"),n=i.find("."+e.val());t.removeClass("block").addClass("none"),n.removeClass("none").addClass("block")})}function t(){a(".kiddiz-widget-chosen-select").chosen({width:"100%"})}a(document).on("click",".widget_multi_add_field",function(e){var i=a(e.currentTarget);e.preventDefault();var t=i.parents(".widget_multi_input");t.find(".widget_multi_fields").append('<div class="set"><input type="text" value="" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>'),n(t)}).on("change",".widget_multi_single_field",function(){n(a(this).parents(".widget_multi_input"))}).on("click",".widget_multi_remove_field",function(e){e.preventDefault();var i=a(this),t=i.parents(".widget_multi_input");i.parent().remove(),n(t)}),e(),a(document).on("click",".kiddiz-accordion",function(e){e.preventDefault(),a(this).next(".kiddiz-panel").slideToggle()}),a(document).on("click",".upload_image_button",function(e){e.preventDefault();var i=a(this),t=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});t.on("select",function(){var e=t.state().get("selection").first().toJSON();i.prev("input").val(e.url)}),t.open()}),i(),t(),a(".kiddiz-icon-picker").each(function(){a(this).iconpicker("#"+this.id)}),a(document).on("widget-updated widget-added",function(){a(".kiddiz-icon-picker").each(function(){a(this).iconpicker("#"+this.id)}),t(),i(),e()})});